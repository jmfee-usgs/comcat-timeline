var y=Object.defineProperty,x=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var b=(r,t,n)=>t in r?y(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,h=(r,t)=>{for(var n in t||(t={}))w.call(t,n)&&b(r,n,t[n]);if(v)for(var n of v(t))T.call(t,n)&&b(r,n,t[n]);return r},u=(r,t)=>x(r,S(t));import{j as p,r as d,u as F,R as $,a as E,B as D}from"./vendor.0887b0bb.js";const k=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};k();const e=p.exports.jsx,l=p.exports.jsxs,L=p.exports.Fragment;function j({children:r,sectionNav:t,title:n}){const[o,i]=d.exports.useState(!1);function a(c){i(!1),c.preventDefault()}function s(c){i(!o),c.preventDefault()}return l("div",{className:"mobilenav-enabled "+(o?"mobilenav-active":""),children:[l("header",{role:"banner",className:"site-header",children:[e("a",{className:"site-logo",href:"/",title:"U.S. Geological Survey",children:e("img",{src:"https://earthquake.usgs.gov/theme/images/usgs-logo.svg",alt:""})}),e("a",{className:"jumplink-navigation",href:"#site-sectionnav",children:"Jump to Navigation"})]}),l("main",{role:"main",className:"page","aria-labelledby":"page-header",children:[e("header",{className:"page-header",id:"page-header",children:e("h1",{children:n})}),e("div",{className:"page-content",children:r}),e("footer",{className:"page-footer"})]}),e("nav",{className:"mobilenav site-footer",children:e("section",{id:"site-sectionnav",className:"site-sectionnav","aria-label":"Section Navigation",children:t})}),l("footer",{className:"site-commonnav",children:[e("a",{href:"https://earthquake.usgs.gov",children:"Home"}),e("a",{href:"https://www.usgs.gov/natural-hazards/earthquake-hazards/about",children:"About Us"}),e("a",{href:"https://www.usgs.gov/natural-hazards/earthquake-hazards/connect",children:"Contacts"}),e("a",{href:"https://www.usgs.gov/policies-and-notices",children:"Legal"})]}),e("div",{className:"mobilenav-mask",onClick:a}),e("button",{className:"mobilenav-toggle",onClick:s,children:"Menu"})]})}function I(r){const[t,n,o]=r.geometry.coordinates,i=r.properties.mag,a=new Date(r.properties.time);return u(h({},r),{depth:o,latitude:n,longitude:t,magnitude:i,products:O(r),time:a})}function M(r){const t=r.properties;return u(h({},r),{depth:t.depth?+t.depth:void 0,latitude:t.latitude?+t.latitude:void 0,longitude:t.longitude?+t.longitude:void 0,magnitude:t.magnitude?+t.magnitude:void 0,time:t.time?new Date(t.time):void 0})}function O(r){const t={};Object.entries(r.properties.products).forEach(([o,i])=>{i.forEach((a,s)=>{const c=`${a.source}_${a.code}_${a.type}`,f=M(a);return s===0&&(f.preferred=!0),t[c]||(t[c]=[]),t[c].push(f),f})});const n=[];return Object.entries(t).forEach(([o,i])=>{i.sort((a,s)=>a.updateTime-s.updateTime),i[0].first=!0,i[i.length-1].last=!0,n.push(...i)}),n.sort((o,i)=>o.updateTime-i.updateTime),n}function P({event:r,host:t}){const n=r.time.toISOString();return e(d.exports.Fragment,{children:l("dl",{className:"horizontal",children:[e("dt",{children:"Event ID"}),e("dd",{children:r.id}),e("dt",{children:"Location"}),e("dd",{children:C(r.latitude,r.longitude)}),e("dt",{children:"Time"}),e("dd",{children:e("time",{dateTime:n,children:n})}),e("dt",{children:"Depth"}),e("dd",{children:r.depth}),e("dt",{children:"Magnitude"}),l("dd",{children:[r.magnitude," ",r.properties.magType]}),e("dt",{children:"Links"}),e("dd",{children:e("a",{href:r.properties.url,target:"blank",children:"Event Page"})}),e("dd",{children:e("a",{href:`${t}/earthquakes/feed/v1.0/detail/${r.id}.geojson`,target:"blank",children:"GeoJSON Feed"})}),e("dd",{children:e("a",{href:`${t}/fdsnws/event/1/query?eventid=${r.id}&format=geojson&includesuperseded=true`,target:"blank",children:"GeoJSON (w/ superseded)"})})]})})}function C(r,t){return`${Math.abs(r).toFixed(3)}\xB0${r<0?"S":"N"}${Math.abs(t).toFixed(3)}\xB0${t<0?"W":"E"}`}function m({reference:r,value:t}){return t?l(d.exports.Fragment,{children:[z(r?t-r:void 0),e("br",{}),e("small",{className:"value",children:t})]}):e(d.exports.Fragment,{children:"\u2013"})}function z(r){return r===void 0||isNaN(r)?"\u2013":(r>=0?"+":"")+r.toFixed(2)}function g({reference:r,value:t}){if(!t)return e(d.exports.Fragment,{children:"\u2013"});const n=r?(t.getTime()-r.getTime())/1e3:void 0;return l("time",{dateTime:t.toISOString(),children:[q(n),e("br",{}),e("small",{className:"value",children:t.toISOString()})]})}function q(r){if(r===void 0||isNaN(r))return"\u2013";let t=0,n=0,o=0,i=0,a=0;t=Math.abs(r),t>60&&(n=Math.floor(t/60),t=t%60,n>60&&(o=Math.floor(n/60),n=n%60,o>24&&(i=Math.floor(o/24),o=o%24,i>365&&(a=Math.floor(i/365),i=i%365))));var s="";return a!=0&&(s+=a+"y"),i!=0&&(s+=i+"d"),o!=0&&a===0&&(s+=o+"h"),n!=0&&a===0&&i===0&&(s+=n+"m"),a===0&&i===0&&o===0&&(s+=t.toFixed(1)+"s"),(r>0?"+":"-")+s}function A({event:r,getProductLink:t}){return l(d.exports.Fragment,{children:[e("input",{type:"radio",name:"products",id:"all-products",defaultChecked:!0}),e("label",{htmlFor:"all-products",children:"All products"}),e("input",{type:"radio",name:"products",id:"only-show-first-last"}),e("label",{htmlFor:"only-show-first-last",children:"Only show first and last versions"}),e("input",{type:"radio",name:"products",id:"only-show-preferred"}),e("label",{htmlFor:"only-show-preferred",children:"Only show preferred"}),e("input",{type:"radio",name:"products",id:"only-show-origins"}),e("label",{htmlFor:"only-show-origins",children:"Only show origins"}),e("br",{})," ",e("input",{type:"checkbox",id:"only-show-diffs",defaultChecked:!0}),e("label",{htmlFor:"only-show-diffs",children:"Hide values"}),e("div",{className:"horizontal-scrolling",children:l("table",{children:[e("thead",{children:l("tr",{children:[e("th",{children:e("abbr",{title:"Time reported by contributor",children:"Sent"})}),e("th",{children:e("abbr",{title:"Time (this server) processed product, relative to Sent",children:"Indexed"})}),e("th",{children:"Product"}),e("th",{children:"Event ID"}),e("th",{children:"Latitude"}),e("th",{children:"Longitude"}),e("th",{children:"Event Time"}),e("th",{children:"Magnitude"}),e("th",{children:"Depth"}),e("th",{children:"Version"}),e("th",{children:"Status"})]})}),e("tbody",{children:r.products.map(n=>e(R,{event:r,link:t?t(n):void 0,product:n},n.id))})]})}),e("p",{className:"alert info",children:e("small",{children:"* Sent is assigned by contributors, and does not necessarily reflect when a product was actually sent via PDL."})})]})}function R({event:r,link:t,product:n}){const o=n.id.replace("urn:usgs-product:",""),i=new Date(n.indexTime),a=n.properties,s=new Date(n.updateTime);return l("tr",{className:[`preferred-${!!n.preferred}`,`status-${n.status}`,`type-${n.type}`,...n.first?["version-first"]:[],...n.last?["version-last"]:[]].join(" "),children:[e("td",{className:"updateTime",children:e(g,{reference:r.time,value:s})}),e("td",{className:"indexTime",children:e(g,{reference:s,value:i})}),e("td",{className:"id",children:t?e("a",{href:t,children:o}):o}),l("td",{className:"eventid",children:[a.eventsource," ",a.eventsourcecode]}),e("td",{className:"latitude",children:e(m,{reference:r.latitude,value:n.latitude})}),e("td",{className:"longitude",children:e(m,{reference:r.longitude,value:n.longitude})}),e("td",{className:"time",children:e(g,{reference:r.time,value:n.time})}),e("td",{className:"magnitude",children:e(m,{reference:r.magnitude,value:n.magnitude})}),e("td",{className:"depth",children:e(m,{reference:r.depth,value:n.depth})}),e("td",{className:"version",children:a.version}),e("td",{className:"statue",children:n.status})]})}function N({url:r}){const[t,n]=d.exports.useState({});return d.exports.useEffect(()=>{const o=new AbortController,i=o.signal;async function a(){!r||(n({loading:!0}),fetch(r,{signal:i}).then(s=>s.json()).then(s=>{i.aborted||n({data:s})}).catch(s=>{i.aborted||n({error:s})}))}return a(),()=>{o.abort()}},[r]),t}function B({eventId:r,host:t="http://earthquake.usgs.gov"}){const n=r?`${t}/fdsnws/event/1/query?`+[`eventid=${r}`,"format=geojson","includesuperseded=true"].join("&"):void 0,o=N({url:n});function i(a){return`${t}/product/${a.type}/${a.code}/${a.source}/${a.updateTime}/pdl_product.json`}if(o.loading)return l("p",{className:"alert info",children:["Loading event ",r]});if(o.error)return l("p",{className:"alert error",children:["Error loading event ",r,":",e("br",{}),""+o.error]});if(o.data){const a=I(o.data);return l(d.exports.Fragment,{children:[e("h2",{children:a.properties.title}),e(P,{event:a,host:t}),e("h3",{children:"Products"}),e(A,{event:a,getProductLink:i})]})}else return e("p",{className:"alert info",children:"Select an Event"})}function H({setState:r,state:t}){const[n,o]=d.exports.useState(t);function i(s){o(u(h({},n),{[s.target.name]:s.target.value}))}function a(s){r(n),s.preventDefault()}return e(d.exports.Fragment,{children:l("form",{className:"site-search",onSubmit:a,children:[l("label",{children:["Host",e("input",{defaultValue:t.host,name:"host",onChange:i,type:"text"})]}),l("label",{children:["Event ID",e("input",{defaultValue:t.eventId,name:"eventId",onChange:i,type:"text"})]}),e("button",{children:"Update"})]})})}function U({onSelect:r,selected:t,url:n}){var a;const o=N({url:n});function i(s){r&&r(s)}return o.loading?e("p",{className:"alert info",children:"Loading..."}):o.error?l("p",{className:"alert error",children:["Error loading:",e("br",{}),""+o.error]}):e(d.exports.Fragment,{children:e("ul",{className:"no-style EventList",children:(a=o.data)==null?void 0:a.features.map(s=>e("li",{children:e("a",{className:t===s.id?"selected":"",onClick:()=>i(s.id),children:s.properties.title})},s.id))})})}function _(){const r="https://earthquake.usgs.gov",[t,n]=d.exports.useState({eventId:void 0,host:r}),[o,i]=F();d.exports.useEffect(()=>{const s=o.get("eventId")||void 0,c=o.get("host")||r;n({eventId:s,host:c})},[]);function a(s){const c=new URLSearchParams;s.eventId&&c.set("eventId",s.eventId),s.host!==r&&c.set("host",s.host),i(c),n(s)}return e(j,{sectionNav:l(L,{children:[e(H,{setState:a,state:t}),e("h3",{children:"Significant Events"}),e(U,{onSelect:s=>a(u(h({},t),{eventId:s})),selected:t.eventId,url:`${t.host}/earthquakes/feed/v1.0/summary/significant_month.geojson`})]}),title:"Event Timeline",children:e(B,{eventId:t.eventId,host:t.host})})}$.render(e(E.StrictMode,{children:e(D,{children:e(_,{})})}),document.getElementById("root"));
